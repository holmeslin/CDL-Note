# 6. Scaling with Google Cloud Operations 透過 Google Cloud Operations 進行擴展

## 6.1 Financial Governance and Managing Cloud Costs 財務治理與管理雲端成本

### 6.1.1 Fundamentals of cloud financial governance 雲財務治理的基本原則

輕鬆訪問雲資源需要對消耗情況進行精確、實時的控制。擁有雲財務治理這一組織用來管理雲支出的流程和控制措施，可以區分安心和導致預算超支的成本失控之間的差異。隨著組織的適應，需要一個跨技術、財務和業務功能的核心團隊共同管理雲成本並實時做出決策。雲成本的可變性影響人員、流程和技術。

#### 人員

人員指的是管理雲成本涉及的不同角色。對於小型組織，一個人可能需要履行多個角色，負責管理雲基礎設施和相關財務的所有方面，包括預算編制、採購、跟踪優化等。而大型組織則可能依靠財務團隊來擔任財務規劃和顧問角色，根據業務優先級做出基於數據的雲支出決策，但他們可能難以在日常、每週或每月基礎上了解或監控雲支出。技術和業務團隊的成員可以建議如何使用雲資源來實現組織的整體業務策略，並提出未來一年所需的額外資源，但他們不一定會將成本因素考慮在決策中。

有效管理雲成本需要跨財務、技術和業務功能的合作。這種合作可能已經存在，或者可以採用集中中心的形式，如雲卓越中心。中央團隊將由多位專家組成，確保在整個組織內實施最佳實踐，並確保對持續的雲支出有可見性，同時能夠在支出高於預期時做出實時決策並討論取捨。

#### 流程

在日常或每週的基礎上，組織應該監控和分析他們的雲使用情況和成本。財務團隊應該在每週或每月的基礎上分析結果，將成本返還給相關團隊，並確定是否需要進行任何更改以確保組織的雲支出得到優化。建立問責文化有助於組織識別浪費，迅速採取行動消除浪費，並確保他們最大限度地利用他們的雲投資。此外，這還將推動技術、財務和業務團隊之間的跨組合作，確保雲支出與更廣泛的業務目標保持一致。

#### 技術

Google Cloud 提供內置工具來幫助組織監控和管理成本，這些工具包括：

1. **更大的可見性**：幫助組織了解其雲資源的使用情況。
2. **推動問責文化**：確保雲支出的透明度和負責任的使用。
3. **控制成本**：減少超支風險，確保預算的有效使用。
4. **智能建議**：提供優化成本和使用情況的建議。

通過這些工具，組織可以獲得更大的可見性，推動問責文化，控制成本以減少超支風險，並提供智能建議以優化成本和使用情況。

### 6.1.2 Cloud Financial Governance Best Practices 雲財務治理最佳實踐

讓我們探討一些組織可以採用的雲財務治理最佳實踐，以提高其雲資源的可預測性和控制能力。

#### 1. 確定誰來管理雲成本

-   如果是團隊管理，理想情況下應由 IT 經理和財務控制員組成。
-   由於雲支出是分散且可變的，建立全組織範圍內的成本問責文化非常重要。
-   為項目明確所有權，並與使用雲資源的部門和團隊分享成本視圖，有助於建立問責文化並促進更負責的支出。
-   Google Cloud 的財務治理政策和權限使您可以輕鬆控制誰可以在組織內進行支出和查看成本，並提供靈活的選項來組織資源並將成本分配給各個部門和團隊。
-   預算根據實際或預測的雲成本通知主要利益相關者，創建具有有意義警報的多個預算是掌控雲成本的重要實踐。

#### 2. 了解發票與成本管理工具的區別

-   發票是雲服務提供商向客戶發送的請求支付已使用服務費用的文件。
-   成本管理工具是用來幫助跟踪、分析和優化雲支出的軟件。
-   成本管理工具，如內置於 Google Cloud 控制台的工具，可以提供細化的數據，發現趨勢，並確定控制或優化成本的行動。

#### 3. 使用 Google Cloud 的成本管理工具

-   Google Cloud 致力於通過提供強大的財務治理工具來支持組織，使客戶更容易將其戰略優先事項與雲使用情況對齊。
-   在優化雲成本之前，組織首先需要了解他們的支出情況，是否存在任何趨勢，以及預測的成本是多少。
-   捕獲正在使用哪些雲資源，誰在使用，出於什麼目的以及成本是多少。
-   確定誰將負責監控這些信息，誰將參與成本管理，以及如何持續報告支出信息。
-   設立與主要雲利益相關者持續溝通的節奏和格式，預先概述這個計劃有助於確保成本管理不會事後考慮。

#### 監控和優化成本

-   Google Cloud 提供內置的報告功能，可以幫助團隊獲得成本可見性，理想情況下，報告應至少每週審查一次。
-   Google Cloud 價格計算器是一個強大的工具，讓您估算雲使用變化將如何影響成本，計算器可在 cloud.google.com/products/calculator 上使用。

#### 實施最佳實踐

-   探討這些最佳實踐後，下一步就是實施它們。
-   如果這不屬於您的責任範圍，請確保將這些最佳實踐傳遞給組織內的相關利益相關者。

### 6.1.3 Using the Resource Hierarchy to Control Access 使用資源層次結構來控制訪問

#### 文章摘要

在雲計算中，控制對資源的訪問是一個重要的考慮因素。相較於傳統的本地基礎設施中使用的物理訪問控制，雲中的資源需要不同的方法來進行管理。Google Cloud 的資源層次結構是一個強大的工具，可以用來控制對雲資源的訪問。這個層次結構是一個樹狀結構，將資源組織成邏輯組，使管理和控制資源變得更加容易。

#### Google Cloud 資源層次結構包含四個級別：

1. **資源**：包括虛擬機、Cloud Storage 桶、BigQuery 中的表等。
2. **項目**：資源被組織到項目中。
3. **文件夾**：可以包含項目或子文件夾。
4. **組織節點**：頂級，包含所有項目、文件夾和資源。

了解資源層次結構很重要，因為它直接關係到如何管理和應用策略。策略是一組定義誰可以訪問資源以及他們可以對資源做什麼的規則，可以在項目、文件夾和組織節點級別定義。一些 Google Cloud 服務也可以將策略應用於個別資源。

#### 使用資源層次結構的好處：

1. **細化的訪問控制**：可以在文件夾、項目或個別資源級別分配角色和權限。
2. **權限繼承**：高級別設置的權限自動繼承給低級別資源，簡化了訪問管理。
3. **增強安全性和合規性**：通過最小特權原則分配訪問權限，確保用戶僅擁有必要的特權，降低未經授權訪問風險。
4. **可見性和審計能力**：可以跟踪不同級別的訪問權限和更改，便於監控和審查訪問控制，提高問責性，識別和解決潛在的安全問題。

這些好處使得 Google Cloud 的資源層次結構成為控制和管理雲資源訪問的有效工具。

### 6.1.4 Controlling Cloud Consumption 控制雲資源消耗

#### 文章摘要

組織希望控制雲資源消耗的原因很多，包括節省成本、增加可見性和提高合規性。Google Cloud 提供了多種工具來幫助控制雲資源消耗，如資源配額策略、預算閾值規則和雲計費報告。

1. **資源配額策略**：允許設置項目或用戶可以使用的資源數量限制，幫助防止過度支出，確保雲資源使用在預算範圍內。

2. **預算閾值規則**：允許設置警報，當雲計費超過某個閾值時通知您，作為成本超支的早期預警，讓您在成本失控之前採取糾正措施。

3. **雲計費報告**：提供追蹤和了解已經在 Google Cloud 資源上花費的費用的被動方法，並幫助優化成本。可以通過將計費數據導出到 BigQuery 來使用雲計費報告監控成本，並使用 Looker Studio 等工具可視化數據。

分析雲資源支出後，組織可能會發現可以通過承諾使用折扣（CUDs）來優化成本。如果工作負載有可預測的資源需求，可以購買 Google Cloud 承諾，以獲得折扣價格，換取在特定期限內使用最低水平的資源。

## 6.2 Operational Excellence and Reliability at Scale 大規模營運卓越性和可靠性

### 6.2.1 Fundamentals of Cloud Reliability 雲可靠性的基本原則

#### 文章摘要

在任何 IT 團隊中，開發人員負責編寫系統和應用程式的代碼，而運營人員則負責確保這些系統和應用程式的可靠運行。開發人員需要具備敏捷性，快速編寫和部署代碼，經常發布新功能，增加核心業務價值。而運營人員則注重系統的穩定性，更偏向於緩慢工作以確保可靠性和一致性。這兩者之間的矛盾在傳統上常常導致責任不明，難以快速解決問題。

#### DevOps 和 SRE

DevOps 是一種軟件開發方法，強調開發和運營團隊之間的合作與溝通，以提高軟件交付的效率、速度和可靠性。站點可靠性工程（SRE）是 DevOps 的一個具體概念，旨在確保雲中部署的軟件系統和服務的可靠性、可用性和效率。

#### 四個黃金信號

1. **延遲（Latency）**：衡量系統返回結果所需的時間，直接影響用戶體驗，能夠指示潛在問題。
2. **流量（Traffic）**：衡量到達系統的請求數量，是系統需求的指標，對容量規劃和基礎設施支出計算很重要。
3. **飽和度（Saturation）**：衡量系統接近容量的程度，是服務滿負荷的指標，與性能下降相關。
4. **錯誤（Errors）**：衡量系統故障或其他問題的事件，能表明系統缺陷、配置或容量問題。

#### SLI、SLO 和 SLA

1. **服務級別指標（SLI）**：顯示系統或服務性能的測量指標，如響應時間、錯誤率或運行時間百分比。
2. **服務級別目標（SLO）**：根據 SLIs 為系統性能設置的目標，如系統在一個月內應該有 99.9%的可用時間。
3. **服務級別協議（SLA）**：雲服務提供商與客戶之間的協議，概述了關於服務質量的承諾和保證，包括商定的 SLOs、性能指標、運行時間保證以及未能履行承諾時的罰款或補救措施。

#### 總結

監控是產品可靠性的基礎，而 DevOps 和 SRE 的實施可以有效提高系統的可靠性和性能。透過使用四個黃金信號來衡量系統性能，並設立明確的 SLIs、SLOs 和 SLAs，可以確保系統的穩定運行，並在出現問題時快速反應，提供優質的服務。

### 6.2.2 Designing Resilient Infrastructure and Processes 設計有彈性基礎設施和流程

#### 文章摘要

在設計雲環境中的基礎設施和流程時，需要確保它們具有彈性、容錯性和可擴展性，以實現高可用性和災難恢復。

#### 高可用性與災難恢復

-   **高可用性**：系統在硬件或軟件故障發生時仍能保持運行和可訪問性。
-   **災難恢復**：在重大中斷或災難後將系統恢復到功能狀態的過程。

#### 關鍵設計考慮因素

1. **冗餘（Redundancy）**：

    - 複製關鍵組件或資源，如電源、網絡交換機或負載平衡器，以提供備份替代方案。
    - 提高系統可靠性，減少單點故障的影響。

2. **複製（Replication）**：

    - 創建多個數據或服務副本，並分佈在不同的服務器或位置上。
    - 確保系統在某些組件或服務器故障時仍能運行，最小化硬件故障或停機的影響，提高服務的可用性。

3. **跨區域分佈（Regional Distribution）**：

    - 將資源分佈在多個地理區域，以確保如果某個區域因自然災害或網絡問題變得不可用，服務可以從另一個區域繼續運行。
    - 提高彈性，減少長時間服務中斷的風險。

4. **可擴展性（Scalability）**：

    - 構建可擴展的基礎設施，以處理不同的工作負載，並在不影響性能或可用性的情況下滿足增加的需求。
    - 使用自動擴展機制根據需求動態調整資源容量，確保在高峰期或流量激增期間服務保持可用和響應。

5. **定期備份（Regular Backups）**：
    - 定期備份關鍵數據和配置，以確保在數據丟失、硬件故障或網絡攻擊發生時，能夠將系統恢復到先前狀態。
    - 備份應存儲在地理上分離的位置，以防止區域停電或災難。

#### 其他措施

-   **監控和警報（Monitoring and Alerting）**：

    -   實施監控、警報和事件響應機制，以便及時識別和解決問題，進一步增強雲基礎設施的整體彈性和可用性。

-   **定期測試和驗證（Regular Testing and Validation）**：
    -   定期測試和驗證這些過程，以確保它們在實際事件中按預期運行，提高高可用性和災難恢復能力。

通過這些設計考慮和措施，可以確保雲基礎設施和流程具有足夠的彈性和可靠性，以應對各種挑戰和故障，並保障業務的持續運行。

### 6.2.3 Modernizing Operations by Using Google Cloud 使用 Google Cloud 現代化運營

#### 文章摘要

在雲端環境中，無法實體檢查伺服器，因此需要使用綜合可觀察性工具來了解伺服器、數據庫或應用程式的運行情況。

#### 可觀察性工具的重要性

可觀察性涉及從系統內的各種來源收集、分析和可視化數據，以了解其性能、健康狀況和行為。Google Cloud 提供了一整套綜合的監控、日誌和診斷工具，稱為 Google Cloud Observability，幫助管理和獲取應用程式和基礎設施的洞察。

#### Google Cloud Observability 主要服務

1. **Cloud Monitoring**：

    - 提供雲基礎設施和應用程式的全面視圖。
    - 收集指標、日誌和跟踪，提供性能、健康狀況和可用性洞察。
    - 允許創建警報策略，當指標、健康檢查結果和正常運行時間檢查結果符合指定標準時通知用戶。

2. **Cloud Logging**：

    - 收集和存儲所有應用程式和基礎設施日誌。
    - 通過實時洞察，進行故障排除、識別趨勢並遵守規定。

3. **Cloud Trace**：

    - 幫助識別應用程式中的性能瓶頸。
    - 收集延遲數據，提供性能洞察。

4. **Cloud Profiler**：

    - 識別應用程式使用了多少 CPU 能力、內存和其他資源。
    - 不斷收集 CPU 使用和內存分配信息，提供應用程式如何使用資源的洞察。

5. **Error Reporting**：
    - 實時計算、分析和彙總運行中的雲服務崩潰情況。
    - 集中的錯誤管理界面，顯示具有排序和篩選功能的結果。
    - 提供專用視圖顯示錯誤詳情，包括時間圖、發生次數、受影響的用戶數、首次和最近一次出現的日期以及清理的異常堆棧跟踪。
    - 支持通過 API 進行電子郵件和移動警報通知。

#### 總結

Google Cloud 提供的綜合可觀察性工具，幫助用戶獲取雲中應用程式和基礎設施的性能和健康狀況的寶貴洞察，從而實現更高效的現代化運營。

### 6.2.4 Google Cloud Customer Care Google Cloud 客戶服務

#### 文章摘要

任何雲採用計劃都可能遇到挑戰，因此擁有有效且高效的支持計劃非常重要。Google Cloud 客戶服務提供了四個不同的服務級別，旨在簡化和精簡您的支持體驗，以滿足您的業務需求。

#### 四個服務級別

1. **基本支持**

    - 免費提供給所有 Google Cloud 客戶。
    - 包括訪問文檔、社區支持、雲計費支持和 Active Assist 建議。
    - Active Assist 是一組工具，幫助您優化雲項目。

2. **標準支持**

    - 推薦用於開發中的工作負載。
    - 無限制訪問技術支持，讓您進行故障排除、測試和探索。
    - 每週 5 天、工作時間內提供無限次訪問英語支持代表的機會。
    - 包括訪問 Cloud Support API，允許集成雲客戶服務與您的 CRM 系統。

3. **增強支持**

    - 專為生產中的工作負載設計，提供快速響應和高質量的支持。
    - 支持多種語言，並提供全天候 24/7 的服務。
    - 初始響應時間比標準支持更快。
    - 提供技術支持升級和第三方技術支持，幫助解決多供應商問題。

4. **高級支持**
    - 專為具有關鍵工作負載的企業設計。
    - 提供最快的響應時間、客戶感知支持和專用的技術帳戶經理。
    - 包括 Google Cloud Skills Boost 培訓平台的學分、計劃峰值事件的事件管理服務、運營健康檢查和客戶感知支持。

#### 增值服務

增強支持和高級支持計劃都提供可額外購買的增值服務。

您可以在 [cloud.google.com/support](https://cloud.google.com/support) 上了解更多有關增值服務和所有 Google Cloud 客戶服務支持產品的信息。

### 6.2.5 The Life of a Support Case 支持案例的生命週期

#### 文章摘要

任何標準、增強或高級支持計劃的 Google Cloud 客戶都可以使用 Google Cloud 控制台創建和管理支持案例。Google Cloud 客戶服務還提供電話和視頻通話等實時互動聯繫方式。支持案例的生命週期通常包括以下幾個階段和互動：

1. **創建案例**

    - 客戶在 Google Cloud 控制台中創建支持案例，並提供有關問題的詳細信息。
    - 只有被分配了技術支持編輯角色的用戶才能創建案例。
    - 客戶需要選擇問題的優先級，從 P4（低影響）到 P1（重大影響），這將影響響應時間。

2. **案例分診**

    - 團隊審查客戶提供的信息，確定問題的嚴重性和對業務的影響。
    - 可能會要求客戶提供更多信息或澄清。

3. **分配和故障排除**

    - 案例被分配給具有相應專業知識的支持工程師。
    - 團隊分析提供的信息，審查系統日誌，進行診斷測試以識別問題根源。
    - 根據問題的複雜性，可能需要與其他內部團隊或專家合作。

4. **定期溝通**

    - 在整個調查過程中，客戶服務團隊與客戶保持定期溝通。
    - 提供進展更新，分享發現，並在需要時要求客戶提供更多信息或採取行動。

5. **升級流程**

    - 升級用於標記流程中斷或案例陷入困境時的情況，但升級並不總是最佳解決方案，特別是對於高影響問題。
    - 最佳解決方案是確保案例設定為適當的優先級，確保案例盡快分配給合適的資源。

6. **解決問題**

    - 確定根本原因後，團隊致力於解決問題或提供緩解計劃。
    - 可能會提供逐步指導、配置更改或解決問題的建議。
    - 必要時，與更高層次的支持或工程團隊協商。

7. **驗證解決方案**

    - 與客戶合作驗證解決方案的有效性，可能要求客戶進行特定測試或提供反饋。
    - 確保問題完全解決並符合客戶的期望。

8. **關閉案例**

    - 當客戶確認問題解決後，支持案例將被關閉。
    - 團隊提供解決方案總結，記錄採取的步驟，並確保客戶對結果滿意。
    - 提供預防措施或未來最佳實踐的建議，以避免類似問題。

9. **反饋調查**
    - 客戶收到反饋調查，以便支持團隊了解其表現和改進之處。

在支持案例的整個生命週期中，Google Cloud 的客戶服務團隊致力於提供及時和有效的幫助，優先考慮客戶滿意度和響應速度，並努力解決客戶在使用 Google Cloud 服務時可能面臨的技術挑戰。

## 6.3 Sustainability with Google Cloud 使用 Google Cloud 實現可持續發展

### 6.3.1 Sustainability with Google Cloud 使用 Google Cloud 實現可持續發展

#### 文章摘要

隨著這次雲數位領導者培訓接近尾聲，我們強調 Google 在技術上的努力與我們對環境和可持續發展的承諾同樣重要。Google Cloud 的運行建立在物理基礎設施上，數據中心消耗大量能源。目前，數據中心使用了全球近 2% 的電力。Google 致力於提高數據中心的運行效率，保護地球，並幫助客戶實現他們的環保目標。

#### 關鍵點：

1. **環保承諾**

    - Google 的數據中心是首批獲得 ISO 14001 認證的數據中心，該標準旨在提高資源效率和減少浪費。
    - Google 位於芬蘭哈米納的數據中心使用海水冷卻系統，降低能耗，是全球首創。
    - Google 成為首個實現碳中和和 100% 可再生能源的大公司，目標是在 2030 年前完全無碳運營。

2. **支持客戶的環保目標**

    - Google Cloud 客戶如 Kaluza 使用 Google Cloud 技術推出智能電動車充電計劃，幫助客戶省錢並減少碳足跡。
    - Kaluza 的智能充電解決方案利用 Google Cloud 的技術，包括 BigQuery 和 Google Kubernetes Engine，來優化充電時間表，確保使用最便宜、碳排放最低的能源。
    - Kaluza 平台還讓電網運營商和能源公司可視化電動汽車的充電情況，提供詳細的見解和優化引擎的效果。

3. **持續的可持續發展努力**
    - Google 不斷致力於可持續發展，並鼓勵其他公司如 Kaluza 加入改善地球健康的行列。

這些努力展示了 Google 在環保和可持續發展方面的領導地位，並通過 Google Cloud 為企業提供支持，實現共同的環保目標。

## 6.4 Summary
